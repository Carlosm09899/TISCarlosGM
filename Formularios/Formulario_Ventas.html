<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Punto de Venta</title>
    <link rel="stylesheet" href="estilos-venta.css">
</head>
<body>
    <div class="container">
        <h1>Registrar Nueva Venta</h1>
        
        <form action="/guardar-venta" method="POST">
            <fieldset>
                <legend>Encabezado de la Venta</legend>
                <div class="grid-container">
                    <div class="form-group">
                        <label for="fecha_venta">Fecha y Hora:</label>
                        <input type="datetime-local" id="fecha_venta" name="fecha_hora_venta" required>
                    </div>
                    <div class="form-group">
                        <label for="id_empleado">Empleado:</label>
                        <select id="id_empleado" name="id_empleado" required>
                            <option value="" disabled selected>Seleccionar empleado</option>
                            <option value="1">Juan Pérez</option>
                            <option value="2">Maria Garcia</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="id_cliente">Cliente Miembro (Opcional):</label>
                        <select id="id_cliente" name="id_cliente_miembro">
                            <option value="">N/A</option>
                            <option value="15">Ana Torres</option>
                            <option value="22">Carlos Ruiz</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="id_habitacion">Cargar a Habitación (Opcional):</label>
                        <select id="id_habitacion" name="id_habitacion_asociada">
                            <option value="">N/A</option>
                            <option value="101">Habitación 101</option>
                            <option value="205">Habitación 205</option>
                        </select>
                    </div>
                </div>
            </fieldset>

            <fieldset>
                <legend>Detalle de Conceptos</legend>
                <table class="items-table">
                    <thead>
                        <tr>
                            <th>Concepto</th>
                            <th>Cantidad</th>
                            <th>Precio Unit.</th>
                            <th>Descuento ($)</th>
                            <th>Subtotal</th>
                            <th>Acción</th>
                        </tr>
                    </thead>
                    <tbody id="detalle-venta-body">
                        </tbody>
                </table>
                <button type="button" id="agregar-item" class="btn-secondary">Añadir Concepto</button>
            </fieldset>

            <fieldset>
                <legend>Totales y Pago</legend>
                <div class="resumen-venta">
                    <p>Subtotal: <span id="resumen-subtotal">$0.00</span></p>
                    <p>Descuentos: <span id="resumen-descuentos">-$0.00</span></p>
                    <p>Impuestos (16%): <span id="resumen-impuestos">+$0.00</span></p>
                    <p class="total-general">Total a Pagar: <span id="resumen-total">$0.00</span></p>
                </div>

                <div id="pagos-container">
                    </div>
                <button type="button" id="agregar-pago" class="btn-secondary">Añadir Método de Pago</button>
            </fieldset>

            <fieldset>
                <legend>Datos de Facturación</legend>
                <div class="form-group-checkbox">
                    <input type="checkbox" id="requiere-factura" name="requiere_factura">
                    <label for="requiere-factura">¿El cliente requiere factura?</label>
                </div>
                <div id="datos-facturacion-container" class="hidden">
                    <div class="form-group">
                        <label for="rfc">RFC:</label>
                        <input type="text" id="rfc" name="rfc" pattern="[A-Z&Ñ]{3,4}[0-9]{2}(0[1-9]|1[012])(0[1-9]|[12][0-9]|3[01])[A-Z0-9]{2}[0-9A]">
                    </div>
                    <div class="form-group">
                        <label for="razon_social">Razón Social:</label>
                        <input type="text" id="razon_social" name="razon_social">
                    </div>
                     <div class="form-group">
                        <label for="correo_facturacion">Correo para Factura:</label>
                        <input type="email" id="correo_facturacion" name="correo_facturacion">
                    </div>
                </div>
            </fieldset>

            <button type="submit" class="btn-primary">Finalizar y Guardar Venta</button>
        </form>
    </div>

    <script src="logica-venta.js"></script>
</body>
</html>