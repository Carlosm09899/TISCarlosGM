<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ventas BD</title>
    <link rel="stylesheet" href="./../styles/style_BD.css">
</head>
<body>

    <header>
        <h1>Diseño de la Base de Datos: Ventas</h1>
    </header>

    <div class="container">

        <div class="section">
            <div class="navigation">
                <ul>
                    <li><a href="./../Submodulos/Ventas.html">[Regresar a Ventas]</a></li>
                </ul>
            </div>
        </div>

        <div class="section">
            <h2>Diagrama de la base de datos</h2>
            
            <img src="./../Imagenes/Diagrama_Ventas.png" alt="Diagrama de la base de datos" style="width: 100%; max-width: 800px;">
        </div>

        <div class="section">
            <h2>Justificación del Diseño de la Base de Datos</h2>

            <h3>Tabla Ventas</h3>
            <h4>Propósito</h4>
            <p>Es la tabla principal que guarda la información general de una venta, como cuándo se realizó y quién la atendió. Funciona como el "recibo" principal.</p>

            <h3>Tabla Detalle_Ventas</h3>
            <h4>Propósito</h4>
            <p>Registra cada uno de los productos o servicios que se incluyeron en una venta. Es el "cuerpo" del recibo.</p>

            <h3>Tabla Pagos</h3>
            <h4>Propósito</h4>
            <p>Registra cómo se liquidó la venta, permitiendo múltiples métodos de pago para una sola transacción.</p>

            <h3>Tabla Facturas</h3>
            <h4>Propósito</h4>
            <p>Almacena la información fiscal de una venta cuando el cliente solicita una factura.</p>

            <h3>Tablas de Catálogo</h3>
            <h4>Propósito</h4>
            <p>Las tablas (Metodos_Pago, Estados_Pago, Estados_Factura) estandarizan la información para evitar errores y mantener la consistencia.</p>
        </div>
        
        <div class="section">
            <h2>Normalización de la Base de Datos</h2>
            <p>Para asegurar que los datos estén bien organizados y sean consistentes, la base de datos se estructuró siguiendo las tres primeras formas normales (1FN, 2FN y 3FN).</p>
            <h3>1NF (Primera Forma Normal)</h3>
            <p>Cada tabla tiene una clave primaria única y todas las columnas son atómicas.</p>
            <h3>2NF (Segunda Forma Normal)</h3>
            <p>La tabla está en 1NF y todos los atributos no clave dependen completamente de la clave primaria.</p>
            <h3>3NF (Tercera Forma Normal)</h3>
            <p>La tabla está en 2NF y ningún atributo no clave depende de otro atributo no clave.</p>
        </div>

        <div class="section">
            <h2>Código SQL para Crear Tablas</h2>
            <pre><code>CREATE DATABASE Ventas;
USE Ventas;

CREATE TABLE Estados_Pago (
    ID_Estado_Pago INT IDENTITY(1,1) PRIMARY KEY,
    Nombre_Estado VARCHAR(50) NOT NULL UNIQUE
);
-- (resto del código para crear tablas...)

CREATE TABLE Facturas (
    ID_Factura INT IDENTITY(1,1) PRIMARY KEY,
    ID_Venta INT NOT NULL UNIQUE,
    -- (resto de los campos...)
    FOREIGN KEY (ID_Venta) REFERENCES Ventas(ID_Venta),
    FOREIGN KEY (ID_Estado_Factura) REFERENCES Estados_Factura(ID_Estado_Factura)
);
GO</code></pre>
        </div>

        <div class="section">
            <h2>Código SQL para Agregar Registros</h2>
            <h3>Registro de Estados_Pago</h3>
            <pre><code>INSERT INTO Estados_Pago (Nombre_Estado) VALUES
('Pagado'), ('Pendiente de Pago'), ('Cancelado'), ('Pago Parcial'), ('Reembolsado'), ...;
GO</code></pre>
            <h3>Registro de Metodos_Pago</h3>
            <pre><code>INSERT INTO Metodos_Pago (Nombre_Metodo) VALUES
('Efectivo'), ('Tarjeta de Crédito'), ('Tarjeta de Débito'), ('Transferencia Bancaria (SPEI)'), ...;
GO</code></pre>
            <h3>Registro de Estados_Factura</h3>
            <pre><code>INSERT INTO Estados_Factura (Nombre_Estado) VALUES
('No Solicitada'), ('Pendiente de Datos Fiscales'), ('Generada'), ('Timbrada (Válida)'), ...;
GO</code></pre>
            <h3>Registro de Ventas</h3>
            <pre><code>INSERT INTO Ventas (Fecha_Hora_Venta, Subtotal, ...) VALUES
('2025-09-15 10:30:00', 950.00, ...),
('2025-09-15 11:15:00', 2500.00, ...);
GO</code></pre>
            </div>

    </div>

</body>
</html>