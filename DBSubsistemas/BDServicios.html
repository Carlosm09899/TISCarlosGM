 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Servicios BD</title>
</head>
<body>

    <a href="./../Submodulos/Servicios.html">[Servicios]</a>

    <h1>Diseño de la base de datos del subsistema de Promociones</h1>

    <br>

    <h1>Diagrama de la base de datos</h1>
    <img src="./../Imagenes/Diagrama_Servicios.png" alt="Diagrama de la base de datos" width="800">

    <h1>Justificación del Diseño de la Base de Datos</h1>

    <h2>Tabla Servicios</h2>
    <h3>Propósito</h3>
    <p>Es la tabla principal, su propósito es almacenar toda la información específica y detallada de cada producto o servicio que ofreces. Es el corazón donde se registran los datos únicos de cada elemento.</p>
    <h3>Campos</h3>
    <ul>
        <li>ID_Servicio: Es el identificador único e irrepetible para cada servicio.</li>
        <li>Nombre_Servicio: Almacena el nombre comercial del servicio que verá el cliente (ej. "Masaje de Piedras Calientes").</li>
        <li>Descripcion_Detallada: Guarda un texto largo que explica en qué consiste el servicio, su duración, qué incluye, etc.</li>
        <li>Precio_Venta: Registra el precio final que paga el cliente por el servicio.</li>
        <li>Costo_Adquisicion: Indica cuánto le cuesta al negocio ofrecer ese servicio (costo de materiales, productos, etc.). Sirve para calcular la ganancia.</li>
        <li>Impuestos_Aplicables: Guarda el porcentaje de impuesto que se aplica a ese servicio (ej. 0.16 para el 16% de IVA).</li>
        <li>Stock_Actual: Es un contador que indica la cantidad disponible del servicio o producto. Si es un producto, cuántas unidades hay; si es un servicio, cuántas sesiones se pueden dar.</li>
        <li>Stock_Minimo: Define una alerta. Cuando el Stock_Actual llega a este número, el sistema puede avisar que es necesario reabastecer.</li>
        <li>Imagen_Referencia: Almacena la ruta o el enlace a una fotografía del servicio o producto para mostrarla en un catálogo.</li>
        <li>Horario_Disponibilidad: Define cuándo se puede ofrecer el servicio (ej. "Lunes a Viernes de 10:00 a 19:00 hrs").</li>
        <li>ID_Categoria: Es un campo de conexión (llave foránea) que sirve para clasificar el servicio. Se enlaza con la tabla Categorias para saber si es un masaje, un facial, etc.</li>
        <li>ID_Estado: Es otro campo de conexión que indica el estatus actual del servicio. Se enlaza con la tabla Estados para saber si está activo, inactivo o agotado.</li>
        <li>ID_Tipo_Control: Campo de conexión que define cómo se maneja el inventario. Se enlaza con la tabla Tipos_Control_Stock.</li>
    </ul>
    
    <h2>Tabla Categorias</h2>
    <h3>Propósito</h3>
    <p>El propósito de esta tabla es agrupar y clasificar los servicios de una manera ordenada y consistente. Es una tabla de catálogo que evita la repetición de texto y los errores de dedo.</p>
    <h3>Campos</h3>
    <ul>
        <li>ID_Categoria: Es el identificador único para cada tipo de categoría</li>
        <li>Nombre_Categoria: Guarda el nombre de la clasificación (ej. "Masajes Corporales", "Tratamientos Faciales", "Venta de Productos").</li>
        <li>Descripcion_Categoria: Un campo opcional para dar más detalles sobre la categoría.</li>
    </ul>
    
    <h2>Tabla Estados</h2>
    <h3>Propósito</h3>
    <p>Esta tabla de catálogo sirve para definir una lista oficial de los posibles estatus que un servicio puede tener. Su propósito es estandarizar la información del estado de un servicio.</p>
    <h3>Campos</h3>
    <ul>
        <li>ID_Estado: Es el identificador único para cada estado posible.</li>
        <li>Nombre_Estado: Guarda el nombre del estatus (ej. "Activo", "Inactivo", "Agotado", "Próximamente").</li>              
    </ul>
    
    <h2>Tabla Tipos_Control_Stock</h2>
    <h3>Propósito</h3>
    <p>El propósito de esta tabla de catálogo es definir los diferentes métodos para gestionar el inventario de los servicios o productos.</p>
    <h3>Campos</h3>
    <ul>
        <li>ID_Tipo_Control: Es el identificador único para cada método de control de inventario.</li>
        <li>Nombre_Control: Guarda el nombre del método (ej. "Por Unidad" para productos, "Por Sesión" para citas, o "No Aplica" para servicios ilimitados).</li>              
    </ul>

    <p>La estructura de la base de datos está diseñada para asegurar que el sistema opere con datos confiables y funcione sin fallos, todo centrado en las necesidades de sus usuarios y administradores.</p>
    
    <h2>Normalización de la Base de Datos</h2>
    <p>Para asegurar que los datos estén bien organizados y sean consistentes, la base de datos se estructuró siguiendo las tres primeras formas normales (1FN, 2FN y 3FN).</p>

    <h3>1NF (Primera Forma Normal)</h3>
    <p>Cada tabla tiene una clave primaria única para identificar cada registro, y todas las columnas son atómicas, lo que significa que cada campo almacena un solo valor y no una lista o conjunto de valores.</p>
    <ul>
        <li><b>Tabla Servicios</b>: Tiene ID_Servicio como su clave primaria única. Todos sus campos, como Nombre_Servicio y Precio_Venta, almacenan un solo dato, cumpliendo con la atomicidad.</li>
        <li><b>Tablas de Catálogo (Categorias, Estados, Tipos_Control_Stock)</b>: Cada una de estas tablas tiene su propia clave primaria (ID_Categoria, ID_Estado, ID_Tipo_Control). Sus campos son atómicos, ya que cada fila representa una única entidad: una categoría, un estado o un tipo de control de stock.</li>
    </ul>

    <h3>2NF (Segunda Forma Normal)</h3>
    <p>Esta forma requiere que la tabla esté en 1NF y que todos los atributos que no forman parte de la clave primaria dependan completamente de la clave primaria completa, no solo de una parte de ella. Es especialmente relevante para tablas con claves compuestas.</p>
    <ul>
        <li><b>Todas las tablas del diseño (Servicios, Categorias, etc.)</b>: Cumplen automáticamente con la 2NF. La razón es que sus claves primarias son simples (formadas por una sola columna). La 2NF es especialmente relevante para eliminar dependencias parciales en claves compuestas, y al no existir claves de ese tipo en este diseño, no hay posibilidad de este tipo de dependencia.</li>
    </ul>

    <h3>3NF (Tercera Forma Normal)</h3>
    <p>Para cumplir con la 3NF, la tabla debe estar en 2NF y ningún atributo que no sea clave puede depender de otro atributo que tampoco sea clave. Esto elimina las dependencias indirectas (transitivas).</p>
    <ul>
        <li><b>Tabla Servicios</b>: Cumple con la 3NF porque todos sus campos (Precio_Venta, Stock_Actual, etc.) dependen directamente y exclusivamente de la clave primaria ID_Servicio y no de otros campos dentro de la misma tabla. Por ejemplo, el Precio_Venta no depende del Stock_Actual, ambos dependen del servicio que se está registrando.</li>
        <li><b>Tablas de Catálogo (Categorias, Estados, Tipos_Control_Stock)</b>: Cumplen con la 3NF de forma natural. En la tabla Categorias, el Nombre_Categoria depende únicamente de ID_Categoria. No existen otros atributos no clave de los que pudiera depender, eliminando así cualquier dependencia transitiva.</li>
    </ul>    
    


    <h1>Código SQL para crear tablas</h1>
    <pre><code>
CREATE DATABASE SERVICIOS

-- --- Tabla de Categorías ---
CREATE TABLE Categorias (
    ID_Categoria INT IDENTITY(1,1) PRIMARY KEY,
    Nombre_Categoria VARCHAR(100) NOT NULL UNIQUE,
    Descripcion_Categoria TEXT
);

-- --- Tabla de Estados ---
CREATE TABLE Estados (
    ID_Estado INT IDENTITY(1,1) PRIMARY KEY,
    Nombre_Estado VARCHAR(50) NOT NULL UNIQUE
);

-- --- Tabla de Tipos de Control de Stock ---
CREATE TABLE Tipos_Control_Stock (
    ID_Tipo_Control INT IDENTITY(1,1) PRIMARY KEY,
    Nombre_Control VARCHAR(100) NOT NULL UNIQUE
);

-- --- Tabla Principal de Servicios ---
CREATE TABLE Servicios ( 
    ID_Servicio INT IDENTITY(1,1) PRIMARY KEY,
    Nombre_Servicio VARCHAR(200) NOT NULL,
    Descripcion_Detallada TEXT,
    
    Precio_Venta DECIMAL(10, 2) NOT NULL DEFAULT 0.00,
    Costo_Adquisicion DECIMAL(10, 2) DEFAULT 0.00,
    Impuestos_Aplicables DECIMAL(4, 2) DEFAULT 0.16,
    
    Stock_Actual INT,
    Stock_Minimo INT,
    
    Imagen_Referencia VARCHAR(255),
    Horario_Disponibilidad VARCHAR(255),
    
    -- Claves Foráneas que conectan con las tablas catálogo
    ID_Categoria INT,
    ID_Estado INT,
    ID_Tipo_Control INT,
    
    -- Definición de las restricciones de las claves foráneas
    FOREIGN KEY (ID_Categoria) REFERENCES Categorias(ID_Categoria),
    FOREIGN KEY (ID_Estado) REFERENCES Estados(ID_Estado),
    FOREIGN KEY (ID_Tipo_Control) REFERENCES Tipos_Control_Stock(ID_Tipo_Control)
);


    </code></pre>


    <h1>Código SQL para agregar registros a las tablas</h1>

    <h3>Registro de Categorias</h3>
    <pre><code>
    INSERT INTO Categorias (Nombre_Categoria, Descripcion_Categoria) VALUES
    ('Masajes Corporales', 'Servicios de masajes para relajación y terapia.'),
    ('Tratamientos Faciales', 'Limpieza e hidratación para el cuidado de la piel del rostro.'),
    ('Venta de Productos', 'Productos de belleza y cuidado personal disponibles para compra.'),
    ('Peluquería y Estilismo', 'Cortes de cabello, peinados y tratamientos capilares.'),
    ('Manicura y Pedicura', 'Cuidado y embellecimiento de uñas, manos y pies.'),
    ('Rituales de Spa', 'Experiencias completas que combinan varios tratamientos.'),
    ('Paquetes y Membresías', 'Conjunto de servicios o accesos por un precio especial.'),
    ('Gimnasio y Fitness', 'Acceso a instalaciones y clases de acondicionamiento físico.'),
    ('Restaurante y Gastronomía', 'Servicios de alimentos y bebidas en nuestras instalaciones.'),
    ('Bar y Coctelería', 'Bebidas y aperitivos en un ambiente relajado.'),
    ('Eventos y Banquetes', 'Renta de espacios y servicios para eventos especiales.'),
    ('Transporte Ejecutivo', 'Servicio de transporte privado para huéspedes.'),
    ('Experiencias Románticas', 'Paquetes diseñados para parejas.'),
    ('Tours y Actividades', 'Excursiones y actividades recreativas organizadas por el hotel.'),
    ('Servicios Empresariales', 'Renta de salas de juntas y equipo de oficina.');
    GO
    </code></pre>

    <h3>Registro de Estados</h3>
    <pre><code>
    ('Activo'),               
    ('Inactivo'),             
    ('Agotado'),              
    ('Próximamente'),         
    ('Descontinuado'),        
    ('En Mantenimiento'),     
    ('Bajo Pedido'),          
    ('En Promoción'),         
    ('Reservado'),            
    ('Oculto'),               
    ('Borrador'),             
    ('Requiere Aprobación'),  
    ('Exclusivo Miembros'),   
    ('Temporalmente Suspendido'), 
    ('Disponible Online');  
    GO 
    </code></pre>

    <h3>Registro de Tipos_Control_Stock</h3>
    <pre><code>
    INSERT INTO Tipos_Control_Stock (Nombre_Control) VALUES
    ('Por Unidad'),           
    ('Por Sesión'),           
    ('No Aplica'),            
    ('Por Litro/Mililitro'),  
    ('Por Gramo/Kilogramo'),  
    ('Por Hora'),             
    ('Por Día'),              
    ('Por Persona'),          
    ('Por Paquete'),          
    ('Uso Interno'),          
    ('Digital/Descargable'),  
    ('Por Reservación'),      
    ('Por Metro Cuadrado'),   
    ('Por Kilómetro'),        
    ('Por Grupo');            
    GO
    </code></pre>

        <h3>Registro de Servicios</h3>
    <pre><code>
    INSERT INTO Servicios (Nombre_Servicio, Descripcion_Detallada, Precio_Venta, Costo_Adquisicion, Stock_Actual, Stock_Minimo, Horario_Disponibilidad, ID_Categoria, ID_Estado, ID_Tipo_Control) VALUES
    ('Masaje Tejido Profundo', '80 minutos de masaje intenso para liberar tensión muscular crónica.', 1200.00, 80.00, 100, 0, 'L-D 9:00-21:00', 1, 1, 2), -- Cat: Masajes, Est: Activo, Ctrl: Por Sesión
    ('Facial de Hidratación con Ácido Hialurónico', 'Tratamiento facial para pieles secas y deshidratadas.', 1100.00, 150.00, 100, 0, 'L-S 10:00-19:00', 2, 1, 2), -- Cat: Faciales, Est: Activo, Ctrl: Por Sesión
    ('Kit de Viaje Esencial', 'Incluye shampoo, acondicionador y crema corporal de 100ml.', 750.00, 400.00, 50, 10, '24/7 en recepción', 3, 1, 1), -- Cat: Productos, Est: Activo, Ctrl: Por Unidad
    ('Corte y Estilizado para Dama', 'Incluye lavado, corte con estilista senior y secado.', 900.00, 50.00, 100, 0, 'M-S 11:00-20:00', 4, 1, 2), -- Cat: Peluquería, Est: Activo, Ctrl: Por Sesión
    ('Pedicura Spa de Lujo', 'Incluye exfoliación, masaje y esmalte de larga duración.', 650.00, 70.00, 100, 0, 'M-S 11:00-20:00', 5, 8, 2), -- Cat: Manicura, Est: En Promoción, Ctrl: Por Sesión
    ('Ritual Holístico de Renovación', 'Experiencia de 3 horas con exfoliación, envoltura corporal y masaje.', 3500.00, 400.00, 50, 0, 'Previa reservación', 6, 1, 12), -- Cat: Rituales, Est: Activo, Ctrl: Por Reservación
    ('Membresía Gimnasio Mensual', 'Acceso ilimitado a todas las áreas del gimnasio y clases grupales.', 1500.00, 100.00, 500, 0, 'L-D 6:00-23:00', 7, 13, 1), -- Cat: Paquetes, Est: Exclusivo Miembros, Ctrl: Por Unidad
    ('Acceso de Día a Gimnasio', 'Day-pass para uso de instalaciones de fitness.', 350.00, 10.00, 1000, 0, 'L-D 6:00-23:00', 8, 1, 7), -- Cat: Gimnasio, Est: Activo, Ctrl: Por Día
    ('Cena Degustación 5 Tiempos', 'Menú especial del chef con maridaje opcional.', 1800.00, 700.00, 40, 0, 'J-S 19:00-23:00', 9, 1, 8), -- Cat: Restaurante, Est: Activo, Ctrl: Por Persona
    ('Clase de Mixología', 'Aprende a preparar 3 cócteles de autor con nuestro bartender experto.', 800.00, 150.00, 20, 0, 'Viernes 18:00', 10, 1, 8), -- Cat: Bar, Est: Activo, Ctrl: Por Persona
    ('Renta Salón "Primavera" por día', 'Salón para eventos con capacidad para 100 personas.', 25000.00, 2000.00, 1, 0, 'Previa reservación', 11, 7, 12), -- Cat: Eventos, Est: Bajo Pedido, Ctrl: Por Reservación
    ('Traslado Aeropuerto-Hotel en SUV', 'Servicio de transporte privado para hasta 4 personas.', 1600.00, 600.00, 10, 0, '24/7 con reservación', 12, 1, 12), -- Cat: Transporte, Est: Activo, Ctrl: Por Reservación
    ('Paquete "Noche Romántica"', 'Incluye botella de vino espumoso, fresas con chocolate y decoración.', 1300.00, 500.00, 50, 5, 'Previa reservación', 13, 1, 9), -- Cat: Experiencias, Est: Activo, Ctrl: Por Paquete
    ('Tour a las Pirámides de Teotihuacán', 'Excursión de día completo con guía certificado y transporte.', 2200.00, 1500.00, 30, 0, 'Miércoles y Sábados', 14, 4, 8), -- Cat: Tours, Est: Próximamente, Ctrl: Por Persona
    ('Renta de Sala de Juntas por Hora', 'Espacio para 8 personas con proyector y servicio de café.', 950.00, 100.00, 10, 0, 'L-V 8:00-19:00', 15, 1, 6); -- Cat: Empresarial, Est: Activo, Ctrl: Por Hora
    GO
    </code></pre>
</body>
</html>