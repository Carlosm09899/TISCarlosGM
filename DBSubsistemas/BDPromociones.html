<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promociones BD</title>
    <link rel="stylesheet" href="./../styles/style_BD.css">
</head>
<body>

    <header>
        <h1>Diseño de la Base de Datos: Promociones</h1>
    </header>

    <div class="container">

        <div class="section">
            <div class="navigation">
                <ul>
                    <li><a href="./../Submodulos/Promociones.html">[Regresar a Promociones]</a></li>
                </ul>
            </div>
        </div>

        <div class="section">
            <h2>Diagrama de la base de datos</h2>
            
            <img src="./../Imagenes/Diagram_Promociones.png" alt="Diagrama de la base de datos" style="width: 100%; max-width: 800px;">
        </div>

        <div class="section">
            <h2>Justificación del Diseño de la Base de Datos</h2>

            <h3>Tabla Promociones</h3>
            <h4>Propósito</h4>
            <p>Es la tabla principal que almacena toda la información central, las reglas y el valor de cada promoción que ofrece el negocio. Funciona como el expediente maestro de cada oferta.</p>
            <h4>Campos</h4>
            <ul>
                <li><b>ID_Promocion:</b> Número de identificación único para cada promoción.</li>
                <li><b>Nombre_Promocion:</b> El nombre comercial de la promoción (ej. "Descuento de Verano").</li>
                <li>Y el resto de los campos...</li>
            </ul>
            
            <h3>Tabla Promocion_Dias</h3>
            <h4>Propósito</h4>
            <p>Su única función es registrar los días específicos de la semana en que una promoción es válida.</p>
            <h4>Campos</h4>
            <ul>
                <li><b>ID_Promocion:</b> Conecta este registro con una promoción específica.</li>
                <li><b>Dia_Semana:</b> Almacena un solo día de la semana (ej. 'Lunes', 'Martes').</li>
            </ul>

            <h3>Tabla Promocion_Servicios_Incluidos</h3>
            <h4>Propósito</h4>
            <p>Su objetivo es listar de forma individual los diferentes servicios o productos que incluye una promoción de tipo "paquete" o "combo".</p>
            <h4>Campos</h4>
            <ul>
                <li><b>ID_Promocion:</b> Conecta este registro con una promoción específica.</li>
                <li><b>Descripcion_Servicio:</b> Guarda el nombre de un único servicio incluido.</li>              
            </ul>
        </div>

        <div class="section">
            <h2>Normalización de la Base de Datos</h2>
            <p>Para asegurar que los datos estén bien organizados y sean consistentes, la base de datos se estructuró siguiendo las tres primeras formas normales (1FN, 2FN y 3FN).</p>
            <h3>1NF (Primera Forma Normal)</h3>
            <p>Cada tabla tiene una clave primaria única y todas las columnas son atómicas (almacenan un solo valor).</p>
            <h3>2NF (Segunda Forma Normal)</h3>
            <p>La tabla está en 1NF y todos los atributos que no son clave dependen completamente de la clave primaria completa.</p>
            <h3>3NF (Tercera Forma Normal)</h3>
            <p>La tabla está en 2NF y ningún atributo que no sea clave depende de otro atributo que tampoco sea clave.</p>
            <p>Esta estructura de datos es eficiente porque minimiza la repetición de información y hace que la gestión de la base de datos sea mucho más sencilla.</p>
        </div>

        <div class="section">
            <h2>Código SQL para Crear Tablas</h2>
            <pre><code>CREATE DATABASE PromocionesBD;
USE PromocionesBD;

-- Creación de la Tabla de Promociones
CREATE TABLE Promociones (
    ID_Promocion INT PRIMARY KEY IDENTITY(1,1),
    Nombre_Promocion NVARCHAR(100) NOT NULL,
    -- ...resto del código SQL
);
GO

-- Tabla para almacenar los días en que aplica una promoción
CREATE TABLE Promocion_Dias (
    ID_Promocion INT NOT NULL,
    Dia_Semana NVARCHAR(20) NOT NULL,
    PRIMARY KEY (ID_Promocion, Dia_Semana),
    FOREIGN KEY (ID_Promocion) REFERENCES Promociones(ID_Promocion) ON DELETE CASCADE
);
GO

-- Tabla para almacenar los servicios incluidos en una promoción
CREATE TABLE Promocion_Servicios_Incluidos (
    ID_Promocion INT NOT NULL,
    Descripcion_Servicio NVARCHAR(255) NOT NULL, 
    PRIMARY KEY (ID_Promocion, Descripcion_Servicio),
    FOREIGN KEY (ID_Promocion) REFERENCES Promociones(ID_Promocion) ON DELETE CASCADE
);
GO</code></pre>
        </div>

        <div class="section">
            <h2>Código SQL para Agregar Registros</h2>
            <h3>Registro de Promociones</h3>
            <pre><code>INSERT INTO Promociones (Nombre_Promocion, Codigo_Promocion, ...) 
VALUES
('Oferta Otoñal', 'OTONO20', ...),
('Madrugador Ejecutivo', 'EXEC15', ...);
GO</code></pre>
            <h3>Registro de Promocion_Dias</h3>
            <pre><code>INSERT INTO Promocion_Dias (ID_Promocion, Dia_Semana) VALUES
(1, 'Todos'), -- Oferta Otoñal
(3, 'Lunes'), (3, 'Martes'), ...; -- 2x1 en Cócteles
GO</code></pre>
            <h3>Registro de Promocion_Servicios_Incluidos</h3>
            <pre><code>INSERT INTO Promocion_Servicios_Incluidos (ID_Promocion, Descripcion_Servicio) VALUES
(4, 'Desayuno Buffet para 2 adultos y 2 niños'),
(4, 'Acceso al club infantil');
GO</code></pre>
        </div>

    </div>

</body>
</html>